<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BET33</title>
<link rel="preload" as="image" href="assets/logo.png">
<link rel="preload" as="video" href="assets/center.mp4">
<style>
/* ====== 기본 ====== */
:root{
  --maxw: 1200px;
  --radius: 16px;
  --line: rgba(0,0,0,.12);
  --glass: rgba(255,255,255,.08);
  --ink: #e9edf3;
  --ink-dim: #b8c2d3;
  --accent: #2aa2ff;
  --neon: #40f0ff;
  --btn-bg: #1a5fb8;
  --btn-bg-2: #0a7cc6;
  --stage-w: 70vw; /* 요청: 중앙 노란 영역 70% 비율 */
}
*{box-sizing:border-box}
html,body{ height:100% }
body{
  margin:0;
  background:#000; color:var(--ink);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Arial, sans-serif;
}

/* ====== 로고 헤더 ====== */
.header{
  padding:10px 18px 6px;
  display:flex; align-items:center; gap:14px;
}
.header .logo{
  height: clamp(72px, 12vw, 180px); /* 텍스트가 크게 보이도록 */
  width:auto; display:block;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.45));
}

/* ====== 스테이지 (중앙 모니터+버튼영역) ====== */
.stage{
  width:min(var(--stage-w), 1100px);
  margin:0 auto; padding:12px 10px 48px;
  position:relative;
}

/* 모니터(16:9) */
.monitor{
  position:relative;
  width:100%; aspect-ratio:16/9;
  border-radius:12px; overflow:hidden;
  background:#151515;
  border:2px solid rgba(255,255,255,.85);
  box-shadow:0 10px 36px rgba(0,0,0,.45);
}
.monitor video, .monitor .promo-slider{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; display:block;
}
.monitor .promo-slider{ display:none; }
.monitor.poweroff::after{
  content:""; position:absolute; inset:0; background:#000;
  animation: power-off .6s ease forwards;
}
@keyframes power-off{
  0%   { clip-path: inset(0% 0% 0% 0%); opacity:1 }
  80%  { clip-path: inset(48% 0% 48% 0%); opacity:.9 }
  100% { clip-path: inset(50% 0% 50% 0%); opacity:1 }
}

/* ====== 버튼 6개 (상단 3, 하단 3 → 요청으로 하단 6개 카드 제거) ====== */
.btns{
  margin-top:16px;
  display:grid; grid-template-columns:repeat(3, 1fr); gap:12px;
}
.btn{
  position:relative; isolation:isolate;
  background: linear-gradient(180deg, var(--btn-bg), var(--btn-bg-2));
  border:1px solid rgba(255,255,255,.35);
  color:#fff; font-weight:800; font-size:18px;
  padding:16px 12px; border-radius:12px;
  text-align:center; cursor:pointer; user-select:none;
  transition: transform .1s ease, opacity .2s ease;
}
.btn:active{ transform: translateY(1px) }
.btn.dim{ opacity:.6 }          /* 클릭 시 반투명 반응 */

.btn::after{ /* 네온 외곽 */
  content:""; position:absolute; inset:-2px;
  border-radius:14px; z-index:-1; opacity:0;
  box-shadow:0 0 10px var(--neon), 0 0 18px var(--neon);
  transition:opacity .2s ease;
}
.btn:hover::after, .btn.active::after{ opacity:1 }

/* ====== 배경 비디오 ====== */
.bg{
  position:fixed; inset:0; width:100%; height:100%;
  object-fit:cover; z-index:-2; opacity:0; transition:opacity .15s linear;
}
.bg.on{ opacity:1 }

/* 모달(프로모션 배너 확대) */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.65); z-index:30;
}
.modal.on{ display:flex }
.modal .card{
  background:#0b0b10; border:1px solid rgba(255,255,255,.12);
  border-radius:16px; padding:12px;
  width:min(92vw, 1080px);
  transform: perspective(900px) translateZ(0) scale(.94);
  opacity:0; animation: holo .35s ease forwards;
}
.modal .card img{ width:100%; height:auto; display:block; border-radius:12px }
.modal .card .txt{ padding:12px 6px 4px; color:#cfd8e3; line-height:1.6 }
@keyframes holo{
  0%{ transform:perspective(900px) translateZ(-40px) scale(.88); opacity:0 }
  100%{ transform:perspective(900px) translateZ(0) scale(1); opacity:1 }
}

/* 반응형 */
@media (max-width: 860px){
  :root{ --stage-w: 92vw }
  .btns{ grid-template-columns:1fr }
  .btn{ font-size:17px }
}
</style>
</head>
<body>

<!-- 배경 비디오(초기 비활성) -->
<video id="bgVid" class="bg" muted playsinline loop poster="assets/bg-poster.jpg">
  <source src="assets/coupon-bg.mp4" type="video/mp4">
</video>

<header class="header">
  <img class="logo" src="assets/logo.png" alt="BET33 비공식 파트너 로고">
</header>

<main class="stage">
  <!-- 모니터 -->
  <section id="monitor" class="monitor">
    <!-- 기본 중앙 영상 -->
    <video id="centerVid" playsinline controlslist="nodownload noplaybackrate"
           poster="assets/center-poster.jpg" muted>
      <source src="assets/center.mp4" type="video/mp4">
    </video>

    <!-- 프로모션 슬라이더 -->
    <div id="promoSlider" class="promo-slider">
      <img id="slideImg" alt="promotion" style="width:100%;height:100%;object-fit:cover;display:block;">
    </div>
  </section>

  <!-- 버튼 6개 -->
  <div class="btns">
    <div class="btn" data-act="join">가입하기</div>
    <div class="btn" data-act="coupon">쿠폰 신청하기</div>
    <div class="btn" data-act="promo">프로모션</div>

    <div class="btn" data-act="participate">참여</div>
    <div class="btn" data-act="emergency">긴급쿠폰신청</div>
    <div class="btn" data-act="inquiry">문의</div>
  </div>
</main>

<!-- 프로모션 모달 -->
<div id="promoModal" class="modal" aria-hidden="true">
  <div class="card">
    <img id="modalImg" alt="promotion large">
    <div class="txt" id="modalTxt"></div>
  </div>
</div>

<!-- 오디오(선택) -->
<audio id="thunder" src="assets/thunder.wav" preload="auto"></audio>
<audio id="dj" src="assets/dj-music.mp3" preload="auto"></audio>

<script>
/* ====== 엘리먼트 ====== */
const bgVid = document.getElementById('bgVid');
const centerVid = document.getElementById('centerVid');
const monitor = document.getElementById('monitor');
const slider = document.getElementById('promoSlider');
const slideImg = document.getElementById('slideImg');
const promoModal = document.getElementById('promoModal');
const modalImg = document.getElementById('modalImg');
const modalTxt = document.getElementById('modalTxt');
const thunder = document.getElementById('thunder');
const dj = document.getElementById('dj');

/* ====== 상태 ====== */
let storm = false;       // 배경 비디오 on/off
let mode = 'center';     // center | promo
let flickerTm = null;

/* ====== 유틸 ====== */
function safePlay(media){ try{ media.play(); }catch(e){} }
function safePause(media){ try{ media.pause(); }catch(e){} }
function sfx(aud, vol=0.7){ try{ aud.currentTime=0; aud.volume=vol; aud.play(); }catch(e){} }
function neonPress(btn, on=true){
  btn.classList.toggle('dim', on);
  btn.classList.toggle('active', on);
}

/* ====== 모니터: 프로모션 슬라이더 ====== */
const slides = [
  {src:'assets/PRO1.png', txt:'프로1: 300배 이상 ~ 333배 미만 당첨 시 3만 지급 · 334~399배 2만 지급'},
  {src:'assets/PRO2.png', txt:'프로2: 슬롯 3번째 환전 실패 이벤트 — 30% 즉시 지급'},
  {src:'assets/PRO3.png', txt:'프로3: 손실금액만큼 100% 지급해 드립니다.'},
];
let slideIdx=0, slideTimer=null;

function startSlider(){
  mode='promo';
  slider.style.display='block';
  centerVid.style.display='none';
  showSlide(slideIdx);
  if(slideTimer) clearInterval(slideTimer);
  slideTimer=setInterval(()=>{ slideIdx=(slideIdx+1)%slides.length; showSlide(slideIdx) }, 5000);
}
function stopSlider(){
  mode='center';
  slider.style.display='none';
  centerVid.style.display='block';
  if(slideTimer) clearInterval(slideTimer);
}
function showSlide(i){
  const item=slides[i];
  slideImg.src=item.src;
  slideImg.onclick=()=>openPromo(item);
}

/* ====== 프로모션 모달(배너 확대) ====== */
function openPromo(item){
  modalImg.src=item.src;
  modalTxt.textContent=item.txt;
  promoModal.classList.add('on');
  promoModal.onclick=()=>promoModal.classList.remove('on');
}

/* ====== 배경-중앙 교차(깜빡임) ====== */
function flickerSequence({duration=2000, pattern=[1,0,1,0,1,0,1,0,1,0]}){
  let i=0;
  const step=Math.max(60, Math.floor(duration/pattern.length));
  if(flickerTm) clearInterval(flickerTm);
  flickerTm=setInterval(()=>{
    const bgOn=!!pattern[i];
    bgVid.classList.toggle('on', bgOn);
    if(++i>=pattern.length){ clearInterval(flickerTm); }
  }, step);
}

/* ====== 액션 ====== */
async function onCoupon(btn){
  neonPress(btn,true);
  sfx(thunder, .6);
  // 배경 영상 소스 = coupon-bg.mp4
  bgVid.querySelector('source').src='assets/coupon-bg.mp4';
  bgVid.load(); safePlay(bgVid);

  // 2초 동안 10회 교차(1-0 패턴)
  flickerSequence({duration:2000, pattern:[1,0,1,0,1,0,1,0,1,0]});

  // 중앙 영상도 같이 플레이
  if(mode!=='center') stopSlider();
  centerVid.muted=true; centerVid.currentTime=0; safePlay(centerVid);

  setTimeout(()=>neonPress(btn,false), 400);
}

async function onEmergency(btn){
  neonPress(btn,true);
  sfx(thunder, .65);

  // 배경/중앙 동일 영상으로 교차 재생 (영상 끝날 때까지만)
  bgVid.querySelector('source').src='assets/emergency-bg.mp4';
  bgVid.load(); centerVid.load();

  // 중앙에도 같은 소스 적용
  centerVid.innerHTML=''; // 기존 source 비움
  const s=document.createElement('source'); s.src='assets/emergency-bg.mp4'; s.type='video/mp4';
  centerVid.appendChild(s); centerVid.load();

  // 교차 시작
  safePlay(bgVid); safePlay(centerVid);
  flickerSequence({duration:5000, pattern:[1,0,1,0,1,0,1,0,1,0,1,0]});

  // 영상 종료시 원상복구
  const endHandler=()=>{ 
    bgVid.classList.remove('on'); safePause(bgVid);
    // 중앙을 기본으로 복구
    centerVid.innerHTML='';
    const s2=document.createElement('source'); s2.src='assets/center.mp4'; s2.type='video/mp4';
    centerVid.appendChild(s2); centerVid.load();
    centerVid.poster='assets/center-poster.jpg';
    centerVid.muted=true; // 자동재생 이슈 방지
    centerVid.removeEventListener('ended', endHandler);
  };
  centerVid.addEventListener('ended', endHandler);
  setTimeout(()=>neonPress(btn,false), 400);
}

function onPromo(btn){
  neonPress(btn,true);
  // 모니터가 전원 꺼지듯 → 슬라이더로 전환
  monitor.classList.add('poweroff');
  setTimeout(()=>{
    monitor.classList.remove('poweroff');
    startSlider();
    neonPress(btn,false);
  }, 620);
}

function onJoin(){
  alert('가입 안내로 이동합니다.\n\n1) 회원가입 기본정보 입력\n2) 본인확인(간단)\n3) 완료 후 “쿠폰 신청하기”에서 선호도 조사 폼 제출\n\n※ 선호도 조사 항목(예):\n- 주 이용 게임(스포츠/카지노/슬롯)\n- 주간 평균 이용 횟수\n- 1회 평균 충전금액\n- 최근 24시간 최대 충전 횟수/금액\n- 안내 메시지 수신 동의');
}

function onParticipate(){ alert('참여 안내: 간단한 이벤트 참여 방법을 안내합니다.'); }
function onInquiry(){ alert('문의: 이메일/메신저 채널로 연결됩니다.'); }

/* ====== 버튼 바인딩 ====== */
document.querySelectorAll('.btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const act=btn.dataset.act;
    if(act==='coupon') onCoupon(btn);
    else if(act==='emergency') onEmergency(btn);
    else if(act==='promo') onPromo(btn);
    else if(act==='join') onJoin();
    else if(act==='participate') onParticipate();
    else if(act==='inquiry') onInquiry();
    // 클릭 사운드(선택)
    try{ dj.volume=.25; dj.currentTime=0; dj.play() }catch(e){}
  });
});

/* 초기: 배경 OFF, 중앙 모니터만 표시 */
bgVid.classList.remove('on');
stopSlider();
</script>
</body>
</html>
